:root{
  --bg: #0b1217;
  --bg-panel:#10161d;
  --ink:#d6e1ea;
  --ink-muted:#9fb3c8;
  --line:#2a3a46;
  --accent:#17334d;
  --accent-2:#2b5a7a;
  --good:#23c28a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--ink);
  font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* ---------- Topbar ---------- */
.topbar{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:10px 12px;
  background:linear-gradient(180deg,#0d151c 0%, #0b1217 85%);
  border-bottom:1px solid #0e1c25;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.tb-left,.tb-mid,.tb-right{ display:flex; align-items:center; gap:8px; flex-wrap:wrap }
.tb-mid{ justify-content:center; flex:1; }
.tb-left{ min-width:280px }
.tb-right{ min-width:280px; justify-content:flex-end }

.btn{
  padding:6px 10px; border-radius:8px;
  border:1px solid var(--line); background:#12202b; color:#cfe7ff;
  cursor:pointer; user-select:none;
}
.btn:hover{ filter:brightness(1.08) }
.btn:active{ transform:translateY(1px) }

.chk{ color:var(--ink-muted); user-select:none; }
.chk input{ vertical-align:middle; margin-right:6px }

.muted{ color:var(--ink-muted) }

/* Tempo-Cycle optisch betonen */
#btnTempo{ background:var(--accent); border-color:var(--accent-2) }

/* ---------- Canvas ---------- */
#main{ padding:8px }
#scene{
  display:block;
  width:100%;
  height:calc(100dvh - 78px); /* ~Topbar */
  background:#0f1720;
  border:1px solid #142431;
  border-radius:10px;
}

/* ---------- Panel (Diag/App-Ops) ---------- */
.panel{
  position:fixed; inset:auto 16px 16px 16px; top:76px; 
  max-height:calc(100dvh - 110px);
  overflow:auto; padding:14px;
  background:var(--bg-panel); border:1px solid var(--line); border-radius:12px;
  box-shadow:0 30px 70px rgba(0,0,0,.45);
}
.panel.hidden{ display:none }
.panel-header{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px}
.panel .row{display:flex; align-items:center; justify-content:space-between; padding:6px 0; border-bottom:1px dashed #1e2c38}
.panel .row:last-child{border-bottom:none}

/* ---------- Slider ---------- */
input[type="range"]{
  width:140px; height:4px; border-radius:3px; outline:none;
  background:linear-gradient(90deg,#375a70, #274155);
  -webkit-appearance:none; appearance:none;
}
input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none;
  width:16px;height:16px;border-radius:50%;
  background:#cfe7ff; border:2px solid #244053; cursor:pointer;
}
input[type="range"]::-moz-range-thumb{
  width:16px;height:16px;border-radius:50%;
  background:#cfe7ff; border:2px solid #244053; cursor:pointer;
}

/* ---------- Utility ---------- */
.badge{
  display:inline-block; padding:2px 6px; border-radius:6px;
  border:1px solid var(--line); color:var(--ink-muted); font-size:12px
}
code,pre{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; font-size:12px }